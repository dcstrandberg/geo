<div id="distance"> 
    <h1 id="demo">{{$ctrl.me.name}}: 
        {{$ctrl.me.geo.lat | number:2}}&deg;N, 
        {{$ctrl.me.geo.long | number:2}}&deg;W
    </h1>
    <!--<h4>Updated: {{ ((new Date - $ctrl.me.updated)/1000) }}s ago</h4>-->
    <h1>{{$ctrl.error}}</h1>

    <br/>
    
    <!--I could actually break this up into two components now since each just reads the database. But would that slow things down?-->
    <ul ng-repeat="currentUser in $ctrl.distances" ng-show="$ctrl.loggedInUser">
        <ul ng-repeat="user in currentUser.distList | orderBy:'distance'">
            <li ng-show="$ctrl.on">
                <h3 ng-class="{matched: user.matched}">
                    <input type="checkbox" 
                        ng-checked="user.matched"   
                        ng-click="$ctrl.matchUser(currentUser, user)"
                    />
                    {{user.name}}: {{user.distance | number:1}} km
                    <!--  - Updated: {{ ((new Date - user.lastActive)/1000) }}s ago-->
                </h3>
            </li>
        </ul>
    </ul>
    
</div>

<div id="buttonbar">
<button id="on" ng-class="{active: $ctrl.on}" ng-click="$ctrl.compassOn()">On</button>
<!-- The following ng-class whould evaluate to true when on = false, but we'll see -->
<button id="off" ng-class="{active: !($ctrl.on)}" ng-click="$ctrl.compassOff()">Off</button>
</div>
